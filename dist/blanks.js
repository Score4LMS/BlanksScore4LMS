H5P.Blanks=function(t,e){var s="ongoing",i="checking",n="showing-solution",o="finished";function a(s,i,n){var o=this;e.call(o,"blanks"),this.contentId=i,this.contentData=n,this.params=t.extend(!0,{},{text:"Fill in",questions:["<p>Oslo is the capital of *Norway*.</p>"],overallFeedback:[],userAnswers:[],showSolutions:"Show solution",tryAgain:"Try again",checkAnswer:"Check",changeAnswer:"Change answer",notFilledOut:"Please fill in all blanks to view solution",answerIsCorrect:"':ans' is correct",answerIsWrong:"':ans' is wrong",answeredCorrectly:"Answered correctly",answeredIncorrectly:"Answered incorrectly",solutionLabel:"Correct answer:",inputLabel:"Blank input @num of @total",inputHasTipLabel:"Tip available",tipLabel:"Tip",scoreBarLabel:"You got :num out of :total points",behaviour:{enableRetry:!0,enableSolutionsButton:!0,enableCheckButton:!0,caseSensitive:!0,showSolutionsRequiresInput:!0,autoCheck:!1,separateLines:!1},a11yCheck:"Check the answers. The responses will be marked as correct, incorrect, or unanswered.",a11yShowSolution:"Show the solution. The task will be marked with its correct solution.",a11yRetry:"Retry the task. Reset all responses and start the task over again.",a11yHeader:"Checking mode",submitAnswer:"Submit"},s);for(var r=this.params.questions.length-1;r>=0;r--)this.params.questions[r]||this.params.questions.splice(r,1);this.contentData=n,void 0!==this.contentData&&void 0!==this.contentData.previousState&&(this.previousState=this.contentData.previousState),this.clozes=[],this.shiftPressed=!1,H5P.$body.keydown((function(t){16===t.keyCode&&(o.shiftPressed=!0)})).keyup((function(t){16===t.keyCode&&(o.shiftPressed=!1)})),this.labelId="h5p-blanks-instructions-"+a.idCounter,this.content=o.createQuestions();var l=o.params.media;if(l&&l.type&&l.type.library){var u=(l=l.type).library.split(" ")[0];"H5P.Image"===u?l.params.file&&o.setImage(l.params.file.path,{disableImageZooming:o.params.media.disableImageZooming||!1,alt:l.params.alt,title:l.params.title}):"H5P.Video"===u?l.params.sources&&o.setVideo(l):"H5P.Audio"===u&&l.params.files&&o.setAudio(l)}o.setIntroduction('<div id="'+this.labelId+'">'+o.params.text+"</div>"),o.setContent(o.content,{class:o.params.behaviour.separateLines?"h5p-separate-lines":""}),o.registerButtons(),o.setH5PUserState()}return a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a.prototype.registerButtons=function(){var e,n=this,o=t('[data-content-id="'+n.contentId+'"].h5p-content'),a=o.parents(".h5p-container");e=0!==a.length?a.last():0!==o.length?o:t(document.body),!n.params.behaviour.autoCheck&&this.params.behaviour.enableCheckButton&&n.addButton("check-answer",n.params.checkAnswer,(function(){n.a11yHeader.innerHTML=n.params.a11yHeader,n.a11yHeader.focus(),n.toggleButtonVisibility(i),n.markResults(),n.showEvaluation(),n.triggerAnswered()}),!0,{"aria-label":n.params.a11yCheck},{confirmationDialog:{enable:n.params.behaviour.confirmCheckDialog,l10n:n.params.confirmCheck,instance:n,$parentElement:e},textIfSubmitting:n.params.submitAnswer,contentData:n.contentData}),n.addButton("show-solution",n.params.showSolutions,(function(){n.showCorrectAnswers(!1)}),n.params.behaviour.enableSolutionsButton,{"aria-label":n.params.a11yShowSolution}),!0===n.params.behaviour.enableRetry&&n.addButton("try-again",n.params.tryAgain,(function(){n.a11yHeader.innerHTML="",n.resetTask(),n.$questions.filter(":first").find("input:first").focus()}),!0,{"aria-label":n.params.a11yRetry},{confirmationDialog:{enable:n.params.behaviour.confirmRetryDialog,l10n:n.params.confirmRetry,instance:n,$parentElement:e}}),n.toggleButtonVisibility(s)},a.prototype.handleBlanks=function(t,e){for(var s,i=t.indexOf("*");-1!==i&&-1!==s;)if(i++,-1!==(s=t.indexOf("*",i))){var n=t.substring(i,s),o="";n.length?(o=e(this.parseSolution(n)),s++):i+=1,t=t.slice(0,i-1)+o+t.slice(s),s-=s-i-o.length,i=t.indexOf("*",s)}return t},a.prototype.createQuestions=function(){for(var e=this,n="",o=0,r=0;r<e.params.questions.length;r++){var l=e.params.questions[r];l=e.handleBlanks(l,(function(t){o+=1;var s=e.params.userAnswers.length>e.clozes.length?e.params.userAnswers[e.clozes.length]:null,i=new a.Cloze(t,e.params.behaviour,s,{answeredCorrectly:e.params.answeredCorrectly,answeredIncorrectly:e.params.answeredIncorrectly,solutionLabel:e.params.solutionLabel,inputLabel:e.params.inputLabel,inputHasTipLabel:e.params.inputHasTipLabel,tipLabel:e.params.tipLabel});return e.clozes.push(i),i})),n+='<div role="group" aria-labelledby="'+e.labelId+'">'+l+"</div>"}return e.hasClozes=o>0,this.$questions=t(n),e.a11yHeader=document.createElement("div"),e.a11yHeader.classList.add("hidden-but-read"),e.a11yHeader.tabIndex=-1,e.$questions[0].insertBefore(e.a11yHeader,this.$questions[0].childNodes[0]||null),this.$questions.find("input").each((function(n){var o;e.params.behaviour.autoCheck&&(o=function(){var s=t("<div>").text(this.getUserAnswer()).html();e.read((this.correct()?e.params.answerIsCorrect:e.params.answerIsWrong).replace(":ans",s)),(e.done||e.allBlanksFilledOut())&&(e.toggleButtonVisibility(i),e.showEvaluation(),e.triggerAnswered(),e.done=!0)}),e.clozes[n].setInput(t(this),o,(function(){e.toggleButtonVisibility(s),e.params.behaviour.autoCheck||e.hideEvaluation()}),n,e.clozes.length)})).keydown((function(s){var i,n,o=t(this);e.autoGrowTextField(o);var a=13===s.keyCode,r=9===s.keyCode&&e.params.behaviour.autoCheck;if((a||r)&&(i=e.$questions.find(".h5p-input-wrapper:not(.h5p-correct) .h5p-text-input"),n=o.is(i[i.length-1])),(r&&n&&!e.shiftPressed||a&&n)&&setTimeout((function(){e.focusButton()}),10),a)return n?o.trigger("blur"):i.eq(i.index(o)+1).focus(),!1})).on("change",(function(){e.answered=!0,e.triggerXAPI("interacted")})),e.on("resize",(function(){e.resetGrowTextField()})),this.$questions},a.prototype.autoGrowTextField=function(e){if(!this.params.behaviour.separateLines){var s=this,i=parseInt(e.css("font-size"),10),n=3*i,o=3.25*i,a=.5*i;setTimeout((function(){var i=t("<div>",{text:e.val()});i.css({position:"absolute","white-space":"nowrap","font-size":e.css("font-size"),"font-family":e.css("font-family"),padding:e.css("padding"),width:"initial"}),e.parent().append(i);var r=i.width(),l=s.$questions.width();i.remove(),r<=n?e.width(n+a):r+o>=l?e.width(l-o):e.width(r+a)}),1)}},a.prototype.resetGrowTextField=function(){var e=this;this.$questions.find("input").each((function(){e.autoGrowTextField(t(this))}))},a.prototype.toggleButtonVisibility=function(t){var e=this.getScore()===this.getMaxScore();this.params.behaviour.autoCheck&&e&&(t=o),this.params.behaviour.enableSolutionsButton&&(t!==i||e?this.hideButton("show-solution"):this.showButton("show-solution")),this.params.behaviour.enableRetry&&(t===i&&!e||t===n?this.showButton("try-again"):this.hideButton("try-again")),t===s?this.showButton("check-answer"):this.hideButton("check-answer"),this.trigger("resize")},a.prototype.allowSolution=function(){return!(!0===this.params.behaviour.showSolutionsRequiresInput&&!this.allBlanksFilledOut()&&(this.updateFeedbackContent(this.params.notFilledOut),this.read(this.params.notFilledOut),1))},a.prototype.allBlanksFilledOut=function(){return!this.clozes.some((function(t){return!t.filledOut()}))},a.prototype.markResults=function(){for(var t=this,e=0;e<t.clozes.length;e++)t.clozes[e].checkAnswer(),t.params.behaviour.enableRetry||t.clozes[e].disableInput();this.trigger("resize")},a.prototype.removeMarkedResults=function(){this.$questions.find(".h5p-input-wrapper").removeClass("h5p-correct h5p-wrong"),this.$questions.find(".h5p-input-wrapper > input").attr("disabled",!1),this.trigger("resize")},a.prototype.showCorrectAnswers=function(t){if(t||this.allowSolution()){this.toggleButtonVisibility(n),this.hideSolutions();for(var e=0;e<this.clozes.length;e++)this.clozes[e].showSolution();this.trigger("resize")}},a.prototype.toggleAllInputs=function(t){for(var e=0;e<this.clozes.length;e++)this.clozes[e].toggleInput(t)},a.prototype.showSolutions=function(){this.params.behaviour.enableSolutionsButton=!0,this.toggleButtonVisibility(o),this.markResults(),this.showEvaluation(),this.showCorrectAnswers(!0),this.toggleAllInputs(!1),this.hideButtons()},a.prototype.resetTask=function(){this.answered=!1,this.hideEvaluation(),this.hideSolutions(),this.clearAnswers(),this.removeMarkedResults(),this.toggleButtonVisibility(s),this.resetGrowTextField(),this.toggleAllInputs(!0),this.done=!1},a.prototype.hideButtons=function(){this.toggleButtonVisibility(o)},a.prototype.triggerAnswered=function(){this.answered=!0;var t=this.createXAPIEventTemplate("answered");this.addQuestionToXAPI(t),this.addResponseToXAPI(t),this.trigger(t)},a.prototype.getXAPIData=function(){var t=this.createXAPIEventTemplate("answered");return this.addQuestionToXAPI(t),this.addResponseToXAPI(t),{statement:t.data.statement}},a.prototype.getxAPIDefinition=function(){var t={};t.description={"en-US":this.params.text},t.type="http://adlnet.gov/expapi/activities/cmi.interaction",t.interactionType="fill-in";const e=[];let s="";for(var i=0;i<this.params.questions.length;i++){var n=this.handleBlanks(this.params.questions[i],(function(t){return e.push(t.solutions),s+=(s?"[,]":"")+t.solutions[0],"__________"}));t.description["en-US"]+=n}return t.correctResponsesPattern=["{case_matters="+this.params.behaviour.caseSensitive+"}"+s],t.extensions=t.extensions||{},t.extensions["https://h5p.org/x-api/case-sensitivity"]=this.params.behaviour.caseSensitive,t.extensions["https://h5p.org/x-api/alternatives"]=e,t},a.prototype.addQuestionToXAPI=function(e){var s=e.getVerifiedStatementValue(["object","definition"]);if(t.extend(!0,s,this.getxAPIDefinition()),this.hasAlternatives){const t=e.getVerifiedStatementValue(["context"]);t.extensions=t.extensions||{},t.extensions["https://h5p.org/x-api/h5p-reporting-version"]="1.1.0"}},a.prototype.parseSolution=function(t){var e,s,i=t.indexOf(":");-1!==i?(e=t.slice(i+1),s=t.slice(0,i)):s=t;var n=s.split("/");this.hasAlternatives=this.hasAlternatives||n.length>1;for(var o=0;o<n.length;o++){n[o]=H5P.trim(n[o]);var a=document.createElement("textarea");a.innerHTML=n[o],n[o]=a.value}return{tip:e,solutions:n}},a.prototype.addResponseToXAPI=function(t){t.setScoredResult(this.getScore(),this.getMaxScore(),this),t.data.statement.result.response=this.getxAPIResponse()},a.prototype.getxAPIResponse=function(){return this.getCurrentState().join("[,]")},a.prototype.showEvaluation=function(){var t=this.getMaxScore(),e=this.getScore(),s=H5P.Question.determineOverallFeedback(this.params.overallFeedback,e/t).replace("@score",e).replace("@total",t);this.setFeedback(s,e,t,this.params.scoreBarLabel),e===t&&this.toggleButtonVisibility(o)},a.prototype.hideEvaluation=function(){this.removeFeedback()},a.prototype.hideSolutions=function(){this.$questions.find(".h5p-correct-answer").remove()},a.prototype.getMaxScore=function(){return this.clozes.length},a.prototype.getScore=function(){for(var t=this,e=0,s=0;s<t.clozes.length;s++)t.clozes[s].correct()&&e++,t.params.userAnswers[s]=t.clozes[s].getUserAnswer();return e},a.prototype.getTitle=function(){return H5P.createTitle(this.contentData.metadata&&this.contentData.metadata.title?this.contentData.metadata.title:"Fill In")},a.prototype.clearAnswers=function(){this.clozes.forEach((function(t){t.setUserInput(""),t.resetAriaLabel()}))},a.prototype.getAnswerGiven=function(){return this.answered||!this.hasClozes},a.setFocus=function(t){setTimeout((function(){t.focus()}),1)},a.prototype.getCurrentState=function(){var t=[];return this.clozes.forEach((function(e){t.push(e.getUserAnswer())})),t},a.prototype.setH5PUserState=function(){var t=this;if(void 0!==this.previousState&&this.previousState.length&&this.previousState.length===this.clozes.length){var e=!0;this.previousState.forEach((function(s,i){s.length&&(t.answered=!0);var n=t.clozes[i];n.setUserInput(s),t.params.behaviour.autoCheck&&(n.filledOut()?n.checkAnswer():e=!1)})),t.params.behaviour.autoCheck&&e&&(t.showEvaluation(),t.toggleButtonVisibility(i))}},a.prototype.disableInput=function(){this.$questions.find("input").attr("disabled",!0)},a.idCounter=0,a}(H5P.jQuery,H5P.Question),H5P.Blanks.parseText=function(t){var e,s,i=new H5P.Blanks({question:t});return(s=t,"",e=s.replace(/<[^>]*>/g,""),e.split(/(\*.*?\*)/).filter((function(t){return t.length>0}))).map((function(t){return function(t){return"*"===t.substr(0,1)&&"*"===t.substr(-1)}(t)?{type:"answer",correct:i.parseSolution(t.slice(1,-1)).solutions}:{type:"text",content:t}}))};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBcUIsTUFLdkI3TyxFQUFLSCxPQUFPMEIsVUFBVU0sV0FBYWdOLElBQ3JDN08sRUFBS3NGLGlCQUNMdEYsRUFBS29GLHVCQUF1QjFGLE1BUWhDSixFQUFPZ0YsVUFBVTZHLGFBQWUsV0FDOUJsTCxLQUFLaUcsV0FBV0UsS0FBSyxTQUFTa0YsS0FBSyxZQUFZLElBR2pEaE0sRUFBTzJELFVBQVksRUFFWjNELEVBMzVCSyxDQTQ1QlhELElBQUkwUCxPQUFRMVAsSUFBSUcsVUEwQm5CSCxJQUFJQyxPQUFPMFAsVUFBWSxTQUFVeEksR0FDL0IsSUFXOEJuRyxFQVVMNE8sRUFyQnJCQyxFQUFRLElBQUk3UCxJQUFJQyxPQUFPLENBQUVrSCxTQUFVQSxJQXlCdkMsT0FKeUJ5SSxFQUltQnpJLEVBQVUsR0FkeEJuRyxFQVdyQjRPLEVBQUkzRyxRQUFRLFdBR2lDLElBYjdDakksRUFBS2tELE1BQU0sYUFBYTRDLFFBQU8sU0FBVThJLEdBQzlDLE9BQU9BLEVBQUk1TSxPQUFTLE1BWW1DOE0sS0FBSSxTQUFVQyxHQUN2RSxPQVRGLFNBQXFDSCxHQUNuQyxNQUEyQixNQUFwQkEsRUFBSUksT0FBTyxFQUFFLElBQWlDLE1BQW5CSixFQUFJSSxRQUFRLEdBUXZDQyxDQUE0QkYsR0FDaEMsQ0FDQy9MLEtBQU0sU0FDTmdGLFFBQVM2RyxFQUFNbEksY0FBY29JLEVBQUtuSSxNQUFNLEdBQUksSUFBSTJGLFdBRWpELENBQ0N2SixLQUFNLE9BQ05ILFFBQVNrTSIsInNvdXJjZXMiOlsid2VicGFjazovL3M0bG1zQmxhbmtzLy4vanMvYmxhbmtzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qZ2xvYmFsIEg1UCovXG5INVAuQmxhbmtzID0gKGZ1bmN0aW9uICgkLCBRdWVzdGlvbikge1xuICAvKipcbiAgICogQGNvbnN0YW50XG4gICAqIEBkZWZhdWx0XG4gICAqL1xuICB2YXIgU1RBVEVfT05HT0lORyA9ICdvbmdvaW5nJztcbiAgdmFyIFNUQVRFX0NIRUNLSU5HID0gJ2NoZWNraW5nJztcbiAgdmFyIFNUQVRFX1NIT1dJTkdfU09MVVRJT04gPSAnc2hvd2luZy1zb2x1dGlvbic7XG4gIHZhciBTVEFURV9GSU5JU0hFRCA9ICdmaW5pc2hlZCc7XG5cbiAgY29uc3QgWEFQSV9BTFRFUk5BVElWRV9FWFRFTlNJT04gPSAnaHR0cHM6Ly9oNXAub3JnL3gtYXBpL2FsdGVybmF0aXZlcyc7XG4gIGNvbnN0IFhBUElfQ0FTRV9TRU5TSVRJVklUWSA9ICdodHRwczovL2g1cC5vcmcveC1hcGkvY2FzZS1zZW5zaXRpdml0eSc7XG4gIGNvbnN0IFhBUElfUkVQT1JUSU5HX1ZFUlNJT05fRVhURU5TSU9OID0gJ2h0dHBzOi8vaDVwLm9yZy94LWFwaS9oNXAtcmVwb3J0aW5nLXZlcnNpb24nO1xuXG4gIC8qKlxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBQYXJhbXNcbiAgICogIFBhcmFtZXRlcnMvY29uZmlndXJhdGlvbiBvYmplY3QgZm9yIEJsYW5rc1xuICAgKlxuICAgKiBAcHJvcGVydHkge09iamVjdH0gUGFyYW1zLmJlaGF2aW91clxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gUGFyYW1zLmJlaGF2aW91ci5jb25maXJtUmV0cnlEaWFsb2dcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFBhcmFtcy5iZWhhdmlvdXIuY29uZmlybUNoZWNrRGlhbG9nXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBQYXJhbXMuY29uZmlybVJldHJ5XG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBQYXJhbXMuY29uZmlybVJldHJ5LmhlYWRlclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gUGFyYW1zLmNvbmZpcm1SZXRyeS5ib2R5XG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBQYXJhbXMuY29uZmlybVJldHJ5LmNhbmNlbExhYmVsXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBQYXJhbXMuY29uZmlybVJldHJ5LmNvbmZpcm1MYWJlbFxuICAgKlxuICAgKiBAcHJvcGVydHkge09iamVjdH0gUGFyYW1zLmNvbmZpcm1DaGVja1xuICAgKiBAcHJvcGVydHkge3N0cmluZ30gUGFyYW1zLmNvbmZpcm1DaGVjay5oZWFkZXJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFBhcmFtcy5jb25maXJtQ2hlY2suYm9keVxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gUGFyYW1zLmNvbmZpcm1DaGVjay5jYW5jZWxMYWJlbFxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gUGFyYW1zLmNvbmZpcm1DaGVjay5jb25maXJtTGFiZWxcbiAgICovXG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgbW9kdWxlLlxuICAgKlxuICAgKiBAY2xhc3MgSDVQLkJsYW5rc1xuICAgKiBAZXh0ZW5kcyBINVAuUXVlc3Rpb25cbiAgICogQHBhcmFtIHtQYXJhbXN9IHBhcmFtc1xuICAgKiBAcGFyYW0ge251bWJlcn0gaWQgQ29udGVudCBpZGVudGlmaWNhdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gY29udGVudERhdGEgVGFzayBzcGVjaWZpYyBjb250ZW50IGRhdGFcbiAgICovXG4gIGZ1bmN0aW9uIEJsYW5rcyhwYXJhbXMsIGlkLCBjb250ZW50RGF0YSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIEluaGVyaXRhbmNlXG4gICAgUXVlc3Rpb24uY2FsbChzZWxmLCAnYmxhbmtzJyk7XG5cbiAgICAvLyBJRHNcbiAgICB0aGlzLmNvbnRlbnRJZCA9IGlkO1xuICAgIHRoaXMuY29udGVudERhdGEgPSBjb250ZW50RGF0YTtcblxuICAgIHRoaXMucGFyYW1zID0gJC5leHRlbmQodHJ1ZSwge30sIHtcbiAgICAgIHRleHQ6IFwiRmlsbCBpblwiLFxuICAgICAgcXVlc3Rpb25zOiBbXG4gICAgICAgIFwiPHA+T3NsbyBpcyB0aGUgY2FwaXRhbCBvZiAqTm9yd2F5Ki48L3A+XCJcbiAgICAgIF0sXG4gICAgICBvdmVyYWxsRmVlZGJhY2s6IFtdLFxuICAgICAgdXNlckFuc3dlcnM6IFtdLCAvLyBUT0RPIFRoaXMgaXNuJ3QgaW4gc2VtYW50aWNzP1xuICAgICAgc2hvd1NvbHV0aW9uczogXCJTaG93IHNvbHV0aW9uXCIsXG4gICAgICB0cnlBZ2FpbjogXCJUcnkgYWdhaW5cIixcbiAgICAgIGNoZWNrQW5zd2VyOiBcIkNoZWNrXCIsXG4gICAgICBjaGFuZ2VBbnN3ZXI6IFwiQ2hhbmdlIGFuc3dlclwiLFxuICAgICAgbm90RmlsbGVkT3V0OiBcIlBsZWFzZSBmaWxsIGluIGFsbCBibGFua3MgdG8gdmlldyBzb2x1dGlvblwiLFxuICAgICAgYW5zd2VySXNDb3JyZWN0OiBcIic6YW5zJyBpcyBjb3JyZWN0XCIsXG4gICAgICBhbnN3ZXJJc1dyb25nOiBcIic6YW5zJyBpcyB3cm9uZ1wiLFxuICAgICAgYW5zd2VyZWRDb3JyZWN0bHk6IFwiQW5zd2VyZWQgY29ycmVjdGx5XCIsXG4gICAgICBhbnN3ZXJlZEluY29ycmVjdGx5OiBcIkFuc3dlcmVkIGluY29ycmVjdGx5XCIsXG4gICAgICBzb2x1dGlvbkxhYmVsOiBcIkNvcnJlY3QgYW5zd2VyOlwiLFxuICAgICAgaW5wdXRMYWJlbDogXCJCbGFuayBpbnB1dCBAbnVtIG9mIEB0b3RhbFwiLFxuICAgICAgaW5wdXRIYXNUaXBMYWJlbDogXCJUaXAgYXZhaWxhYmxlXCIsXG4gICAgICB0aXBMYWJlbDogXCJUaXBcIixcbiAgICAgIHNjb3JlQmFyTGFiZWw6ICdZb3UgZ290IDpudW0gb3V0IG9mIDp0b3RhbCBwb2ludHMnLFxuICAgICAgYmVoYXZpb3VyOiB7XG4gICAgICAgIGVuYWJsZVJldHJ5OiB0cnVlLFxuICAgICAgICBlbmFibGVTb2x1dGlvbnNCdXR0b246IHRydWUsXG4gICAgICAgIGVuYWJsZUNoZWNrQnV0dG9uOiB0cnVlLFxuICAgICAgICBjYXNlU2Vuc2l0aXZlOiB0cnVlLFxuICAgICAgICBzaG93U29sdXRpb25zUmVxdWlyZXNJbnB1dDogdHJ1ZSxcbiAgICAgICAgYXV0b0NoZWNrOiBmYWxzZSxcbiAgICAgICAgc2VwYXJhdGVMaW5lczogZmFsc2VcbiAgICAgIH0sXG4gICAgICBhMTF5Q2hlY2s6ICdDaGVjayB0aGUgYW5zd2Vycy4gVGhlIHJlc3BvbnNlcyB3aWxsIGJlIG1hcmtlZCBhcyBjb3JyZWN0LCBpbmNvcnJlY3QsIG9yIHVuYW5zd2VyZWQuJyxcbiAgICAgIGExMXlTaG93U29sdXRpb246ICdTaG93IHRoZSBzb2x1dGlvbi4gVGhlIHRhc2sgd2lsbCBiZSBtYXJrZWQgd2l0aCBpdHMgY29ycmVjdCBzb2x1dGlvbi4nLFxuICAgICAgYTExeVJldHJ5OiAnUmV0cnkgdGhlIHRhc2suIFJlc2V0IGFsbCByZXNwb25zZXMgYW5kIHN0YXJ0IHRoZSB0YXNrIG92ZXIgYWdhaW4uJyxcbiAgICAgIGExMXlIZWFkZXI6ICdDaGVja2luZyBtb2RlJyxcbiAgICAgIHN1Ym1pdEFuc3dlcjogJ1N1Ym1pdCcsXG4gICAgfSwgcGFyYW1zKTtcblxuICAgIC8vIERlbGV0ZSBlbXB0eSBxdWVzdGlvbnNcbiAgICBmb3IgKHZhciBpID0gdGhpcy5wYXJhbXMucXVlc3Rpb25zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBpZiAoIXRoaXMucGFyYW1zLnF1ZXN0aW9uc1tpXSkge1xuICAgICAgICB0aGlzLnBhcmFtcy5xdWVzdGlvbnMuc3BsaWNlKGksIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFByZXZpb3VzIHN0YXRlXG4gICAgdGhpcy5jb250ZW50RGF0YSA9IGNvbnRlbnREYXRhO1xuICAgIGlmICh0aGlzLmNvbnRlbnREYXRhICE9PSB1bmRlZmluZWQgJiYgdGhpcy5jb250ZW50RGF0YS5wcmV2aW91c1N0YXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMucHJldmlvdXNTdGF0ZSA9IHRoaXMuY29udGVudERhdGEucHJldmlvdXNTdGF0ZTtcbiAgICB9XG5cbiAgICAvLyBDbG96ZXNcbiAgICB0aGlzLmNsb3plcyA9IFtdO1xuXG4gICAgLy8gS2VlcCB0cmFjayB0YWJiaW5nIGZvcndhcmQgb3IgYmFja3dhcmRzXG4gICAgdGhpcy5zaGlmdFByZXNzZWQgPSBmYWxzZTtcblxuICAgIEg1UC4kYm9keS5rZXlkb3duKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDE2KSB7XG4gICAgICAgIHNlbGYuc2hpZnRQcmVzc2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KS5rZXl1cChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxNikge1xuICAgICAgICBzZWxmLnNoaWZ0UHJlc3NlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gVXNpbmcgaW5zdHJ1Y3Rpb25zIGFzIGxhYmVsIGZvciBvdXIgdGV4dCBncm91cHNcbiAgICB0aGlzLmxhYmVsSWQgPSAnaDVwLWJsYW5rcy1pbnN0cnVjdGlvbnMtJyArIEJsYW5rcy5pZENvdW50ZXI7XG4gICAgdGhpcy5jb250ZW50ID0gc2VsZi5jcmVhdGVRdWVzdGlvbnMoKTtcblxuICAgIC8vIENoZWNrIGZvciB0YXNrIG1lZGlhXG4gICAgdmFyIG1lZGlhID0gc2VsZi5wYXJhbXMubWVkaWE7XG4gICAgaWYgKG1lZGlhICYmIG1lZGlhLnR5cGUgJiYgbWVkaWEudHlwZS5saWJyYXJ5KSB7XG4gICAgICBtZWRpYSA9IG1lZGlhLnR5cGU7XG4gICAgICB2YXIgdHlwZSA9IG1lZGlhLmxpYnJhcnkuc3BsaXQoJyAnKVswXTtcbiAgICAgIGlmICh0eXBlID09PSAnSDVQLkltYWdlJykge1xuICAgICAgICBpZiAobWVkaWEucGFyYW1zLmZpbGUpIHtcbiAgICAgICAgICAvLyBSZWdpc3RlciB0YXNrIGltYWdlXG4gICAgICAgICAgc2VsZi5zZXRJbWFnZShtZWRpYS5wYXJhbXMuZmlsZS5wYXRoLCB7XG4gICAgICAgICAgICBkaXNhYmxlSW1hZ2Vab29taW5nOiBzZWxmLnBhcmFtcy5tZWRpYS5kaXNhYmxlSW1hZ2Vab29taW5nIHx8IGZhbHNlLFxuICAgICAgICAgICAgYWx0OiBtZWRpYS5wYXJhbXMuYWx0LFxuICAgICAgICAgICAgdGl0bGU6IG1lZGlhLnBhcmFtcy50aXRsZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0eXBlID09PSAnSDVQLlZpZGVvJykge1xuICAgICAgICBpZiAobWVkaWEucGFyYW1zLnNvdXJjZXMpIHtcbiAgICAgICAgICAvLyBSZWdpc3RlciB0YXNrIHZpZGVvXG4gICAgICAgICAgc2VsZi5zZXRWaWRlbyhtZWRpYSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdINVAuQXVkaW8nKSB7XG4gICAgICAgIGlmIChtZWRpYS5wYXJhbXMuZmlsZXMpIHtcbiAgICAgICAgICAvLyBSZWdpc3RlciB0YXNrIGF1ZGlvXG4gICAgICAgICAgc2VsZi5zZXRBdWRpbyhtZWRpYSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZWdpc3RlciB0YXNrIGludHJvZHVjdGlvbiB0ZXh0XG4gICAgc2VsZi5zZXRJbnRyb2R1Y3Rpb24oJzxkaXYgaWQ9XCInICsgdGhpcy5sYWJlbElkICsgJ1wiPicgKyBzZWxmLnBhcmFtcy50ZXh0ICsgJzwvZGl2PicpO1xuXG4gICAgLy8gUmVnaXN0ZXIgdGFzayBjb250ZW50IGFyZWFcbiAgICBzZWxmLnNldENvbnRlbnQoc2VsZi5jb250ZW50LCB7XG4gICAgICAnY2xhc3MnOiBzZWxmLnBhcmFtcy5iZWhhdmlvdXIuc2VwYXJhdGVMaW5lcyA/ICdoNXAtc2VwYXJhdGUtbGluZXMnIDogJydcbiAgICB9KTtcblxuICAgIC8vIC4uLiBhbmQgYnV0dG9uc1xuICAgIHNlbGYucmVnaXN0ZXJCdXR0b25zKCk7XG5cbiAgICAvLyBSZXN0b3JlIHByZXZpb3VzIHN0YXRlXG4gICAgc2VsZi5zZXRINVBVc2VyU3RhdGUoKTtcbiAgfVxuXG4gIC8vIEluaGVyaXRhbmNlXG4gIEJsYW5rcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFF1ZXN0aW9uLnByb3RvdHlwZSk7XG4gIEJsYW5rcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCbGFua3M7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbGwgdGhlIGJ1dHRvbnMgZm9yIHRoZSB0YXNrXG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLnJlZ2lzdGVyQnV0dG9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgJGNvbnRlbnQgPSAkKCdbZGF0YS1jb250ZW50LWlkPVwiJyArIHNlbGYuY29udGVudElkICsgJ1wiXS5oNXAtY29udGVudCcpO1xuICAgIHZhciAkY29udGFpbmVyUGFyZW50cyA9ICRjb250ZW50LnBhcmVudHMoJy5oNXAtY29udGFpbmVyJyk7XG5cbiAgICAvLyBzZWxlY3QgZmluZCBjb250YWluZXIgdG8gYXR0YWNoIGRpYWxvZ3MgdG9cbiAgICB2YXIgJGNvbnRhaW5lcjtcbiAgICBpZiAoJGNvbnRhaW5lclBhcmVudHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAvLyB1c2UgcGFyZW50IGhpZ2hlc3QgdXAgaWYgYW55XG4gICAgICAkY29udGFpbmVyID0gJGNvbnRhaW5lclBhcmVudHMubGFzdCgpO1xuICAgIH1cbiAgICBlbHNlIGlmICgkY29udGVudC5sZW5ndGggIT09IDApIHtcbiAgICAgICRjb250YWluZXIgPSAkY29udGVudDtcbiAgICB9XG4gICAgZWxzZSAge1xuICAgICAgJGNvbnRhaW5lciA9ICQoZG9jdW1lbnQuYm9keSk7XG4gICAgfVxuXG4gICAgaWYgKCFzZWxmLnBhcmFtcy5iZWhhdmlvdXIuYXV0b0NoZWNrICYmIHRoaXMucGFyYW1zLmJlaGF2aW91ci5lbmFibGVDaGVja0J1dHRvbikge1xuICAgICAgLy8gQ2hlY2sgYW5zd2VyIGJ1dHRvblxuICAgICAgc2VsZi5hZGRCdXR0b24oJ2NoZWNrLWFuc3dlcicsIHNlbGYucGFyYW1zLmNoZWNrQW5zd2VyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIE1vdmUgZm9jdXMgdG8gdG9wIG9mIGNvbnRlbnRcbiAgICAgICAgc2VsZi5hMTF5SGVhZGVyLmlubmVySFRNTCA9IHNlbGYucGFyYW1zLmExMXlIZWFkZXI7XG4gICAgICAgIHNlbGYuYTExeUhlYWRlci5mb2N1cygpO1xuXG4gICAgICAgIHNlbGYudG9nZ2xlQnV0dG9uVmlzaWJpbGl0eShTVEFURV9DSEVDS0lORyk7XG4gICAgICAgIHNlbGYubWFya1Jlc3VsdHMoKTtcbiAgICAgICAgc2VsZi5zaG93RXZhbHVhdGlvbigpO1xuICAgICAgICBzZWxmLnRyaWdnZXJBbnN3ZXJlZCgpO1xuICAgICAgfSwgdHJ1ZSwge1xuICAgICAgICAnYXJpYS1sYWJlbCc6IHNlbGYucGFyYW1zLmExMXlDaGVjayxcbiAgICAgIH0sIHtcbiAgICAgICAgY29uZmlybWF0aW9uRGlhbG9nOiB7XG4gICAgICAgICAgZW5hYmxlOiBzZWxmLnBhcmFtcy5iZWhhdmlvdXIuY29uZmlybUNoZWNrRGlhbG9nLFxuICAgICAgICAgIGwxMG46IHNlbGYucGFyYW1zLmNvbmZpcm1DaGVjayxcbiAgICAgICAgICBpbnN0YW5jZTogc2VsZixcbiAgICAgICAgICAkcGFyZW50RWxlbWVudDogJGNvbnRhaW5lclxuICAgICAgICB9LFxuICAgICAgICB0ZXh0SWZTdWJtaXR0aW5nOiBzZWxmLnBhcmFtcy5zdWJtaXRBbnN3ZXIsXG4gICAgICAgIGNvbnRlbnREYXRhOiBzZWxmLmNvbnRlbnREYXRhLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU2hvdyBzb2x1dGlvbiBidXR0b25cbiAgICBzZWxmLmFkZEJ1dHRvbignc2hvdy1zb2x1dGlvbicsIHNlbGYucGFyYW1zLnNob3dTb2x1dGlvbnMsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGYuc2hvd0NvcnJlY3RBbnN3ZXJzKGZhbHNlKTtcbiAgICB9LCBzZWxmLnBhcmFtcy5iZWhhdmlvdXIuZW5hYmxlU29sdXRpb25zQnV0dG9uLCB7XG4gICAgICAnYXJpYS1sYWJlbCc6IHNlbGYucGFyYW1zLmExMXlTaG93U29sdXRpb24sXG4gICAgfSk7XG5cbiAgICAvLyBUcnkgYWdhaW4gYnV0dG9uXG4gICAgaWYgKHNlbGYucGFyYW1zLmJlaGF2aW91ci5lbmFibGVSZXRyeSA9PT0gdHJ1ZSkge1xuICAgICAgc2VsZi5hZGRCdXR0b24oJ3RyeS1hZ2FpbicsIHNlbGYucGFyYW1zLnRyeUFnYWluLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuYTExeUhlYWRlci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgc2VsZi5yZXNldFRhc2soKTtcbiAgICAgICAgc2VsZi4kcXVlc3Rpb25zLmZpbHRlcignOmZpcnN0JykuZmluZCgnaW5wdXQ6Zmlyc3QnKS5mb2N1cygpO1xuICAgICAgfSwgdHJ1ZSwge1xuICAgICAgICAnYXJpYS1sYWJlbCc6IHNlbGYucGFyYW1zLmExMXlSZXRyeSxcbiAgICAgIH0sIHtcbiAgICAgICAgY29uZmlybWF0aW9uRGlhbG9nOiB7XG4gICAgICAgICAgZW5hYmxlOiBzZWxmLnBhcmFtcy5iZWhhdmlvdXIuY29uZmlybVJldHJ5RGlhbG9nLFxuICAgICAgICAgIGwxMG46IHNlbGYucGFyYW1zLmNvbmZpcm1SZXRyeSxcbiAgICAgICAgICBpbnN0YW5jZTogc2VsZixcbiAgICAgICAgICAkcGFyZW50RWxlbWVudDogJGNvbnRhaW5lclxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgc2VsZi50b2dnbGVCdXR0b25WaXNpYmlsaXR5KFNUQVRFX09OR09JTkcpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGaW5kIGJsYW5rcyBpbiBhIHN0cmluZyBhbmQgcnVuIGEgaGFuZGxlciBvbiB0aG9zZSBibGFua3NcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHF1ZXN0aW9uXG4gICAqICAgUXVlc3Rpb24gdGV4dCBjb250YWluaW5nIGJsYW5rcyBlbmNsb3NlZCBpbiBhc3Rlcmlza3MuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGhhbmRsZXJcbiAgICogICBSZXBsYWNlcyB0aGUgYmxhbmtzIHRleHQgd2l0aCBhbiBpbnB1dCBmaWVsZC5cbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICogICBUaGUgcXVlc3Rpb24gd2l0aCBibGFua3MgcmVwbGFjZWQgYnkgdGhlIGdpdmVuIGhhbmRsZXIuXG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLmhhbmRsZUJsYW5rcyA9IGZ1bmN0aW9uIChxdWVzdGlvbiwgaGFuZGxlcikge1xuICAgIC8vIEdvIHRocm91Z2ggdGhlIHRleHQgYW5kIHJ1biBoYW5kbGVyIG9uIGFsbCBhc3Rlcmlza1xuICAgIHZhciBjbG96ZUVuZCwgY2xvemVTdGFydCA9IHF1ZXN0aW9uLmluZGV4T2YoJyonKTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgd2hpbGUgKGNsb3plU3RhcnQgIT09IC0xICYmIGNsb3plRW5kICE9PSAtMSkge1xuICAgICAgY2xvemVTdGFydCsrO1xuICAgICAgY2xvemVFbmQgPSBxdWVzdGlvbi5pbmRleE9mKCcqJywgY2xvemVTdGFydCk7XG4gICAgICBpZiAoY2xvemVFbmQgPT09IC0xKSB7XG4gICAgICAgIGNvbnRpbnVlOyAvLyBObyBlbmRcbiAgICAgIH1cbiAgICAgIHZhciBjbG96ZUNvbnRlbnQgPSBxdWVzdGlvbi5zdWJzdHJpbmcoY2xvemVTdGFydCwgY2xvemVFbmQpO1xuICAgICAgdmFyIHJlcGxhY2VyID0gJyc7XG4gICAgICBpZiAoY2xvemVDb250ZW50Lmxlbmd0aCkge1xuICAgICAgICByZXBsYWNlciA9IGhhbmRsZXIoc2VsZi5wYXJzZVNvbHV0aW9uKGNsb3plQ29udGVudCkpO1xuICAgICAgICBjbG96ZUVuZCsrO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNsb3plU3RhcnQgKz0gMTtcbiAgICAgIH1cbiAgICAgIHF1ZXN0aW9uID0gcXVlc3Rpb24uc2xpY2UoMCwgY2xvemVTdGFydCAtIDEpICsgcmVwbGFjZXIgKyBxdWVzdGlvbi5zbGljZShjbG96ZUVuZCk7XG4gICAgICBjbG96ZUVuZCAtPSBjbG96ZUVuZCAtIGNsb3plU3RhcnQgLSByZXBsYWNlci5sZW5ndGg7XG5cbiAgICAgIC8vIEZpbmQgdGhlIG5leHQgY2xvemVcbiAgICAgIGNsb3plU3RhcnQgPSBxdWVzdGlvbi5pbmRleE9mKCcqJywgY2xvemVFbmQpO1xuICAgIH1cbiAgICByZXR1cm4gcXVlc3Rpb247XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBxdWVzdGl0b25zIGh0bWwgZm9yIERPTVxuICAgKi9cbiAgQmxhbmtzLnByb3RvdHlwZS5jcmVhdGVRdWVzdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIGh0bWwgPSAnJztcbiAgICB2YXIgY2xvemVOdW1iZXIgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5wYXJhbXMucXVlc3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcXVlc3Rpb24gPSBzZWxmLnBhcmFtcy5xdWVzdGlvbnNbaV07XG5cbiAgICAgIC8vIEdvIHRocm91Z2ggdGhlIHF1ZXN0aW9uIHRleHQgYW5kIHJlcGxhY2UgYWxsIHRoZSBhc3Rlcmlza3Mgd2l0aCBpbnB1dCBmaWVsZHNcbiAgICAgIHF1ZXN0aW9uID0gc2VsZi5oYW5kbGVCbGFua3MocXVlc3Rpb24sIGZ1bmN0aW9uIChzb2x1dGlvbikge1xuICAgICAgICAvLyBDcmVhdGUgbmV3IGNsb3plXG4gICAgICAgIGNsb3plTnVtYmVyICs9IDE7XG4gICAgICAgIHZhciBkZWZhdWx0VXNlckFuc3dlciA9IChzZWxmLnBhcmFtcy51c2VyQW5zd2Vycy5sZW5ndGggPiBzZWxmLmNsb3plcy5sZW5ndGggPyBzZWxmLnBhcmFtcy51c2VyQW5zd2Vyc1tzZWxmLmNsb3plcy5sZW5ndGhdIDogbnVsbCk7XG4gICAgICAgIHZhciBjbG96ZSA9IG5ldyBCbGFua3MuQ2xvemUoc29sdXRpb24sIHNlbGYucGFyYW1zLmJlaGF2aW91ciwgZGVmYXVsdFVzZXJBbnN3ZXIsIHtcbiAgICAgICAgICBhbnN3ZXJlZENvcnJlY3RseTogc2VsZi5wYXJhbXMuYW5zd2VyZWRDb3JyZWN0bHksXG4gICAgICAgICAgYW5zd2VyZWRJbmNvcnJlY3RseTogc2VsZi5wYXJhbXMuYW5zd2VyZWRJbmNvcnJlY3RseSxcbiAgICAgICAgICBzb2x1dGlvbkxhYmVsOiBzZWxmLnBhcmFtcy5zb2x1dGlvbkxhYmVsLFxuICAgICAgICAgIGlucHV0TGFiZWw6IHNlbGYucGFyYW1zLmlucHV0TGFiZWwsXG4gICAgICAgICAgaW5wdXRIYXNUaXBMYWJlbDogc2VsZi5wYXJhbXMuaW5wdXRIYXNUaXBMYWJlbCxcbiAgICAgICAgICB0aXBMYWJlbDogc2VsZi5wYXJhbXMudGlwTGFiZWxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2VsZi5jbG96ZXMucHVzaChjbG96ZSk7XG4gICAgICAgIHJldHVybiBjbG96ZTtcbiAgICAgIH0pO1xuXG4gICAgICBodG1sICs9ICc8ZGl2IHJvbGU9XCJncm91cFwiIGFyaWEtbGFiZWxsZWRieT1cIicgKyBzZWxmLmxhYmVsSWQgKyAnXCI+JyArIHF1ZXN0aW9uICsgJzwvZGl2Pic7XG4gICAgfVxuXG4gICAgc2VsZi5oYXNDbG96ZXMgPSBjbG96ZU51bWJlciA+IDA7XG4gICAgdGhpcy4kcXVlc3Rpb25zID0gJChodG1sKTtcblxuICAgIHNlbGYuYTExeUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHNlbGYuYTExeUhlYWRlci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4tYnV0LXJlYWQnKTtcbiAgICBzZWxmLmExMXlIZWFkZXIudGFiSW5kZXggPSAtMTtcbiAgICBzZWxmLiRxdWVzdGlvbnNbMF0uaW5zZXJ0QmVmb3JlKHNlbGYuYTExeUhlYWRlciwgdGhpcy4kcXVlc3Rpb25zWzBdLmNoaWxkTm9kZXNbMF0gfHwgbnVsbCk7XG5cbiAgICAvLyBTZXQgaW5wdXQgZmllbGRzLlxuICAgIHRoaXMuJHF1ZXN0aW9ucy5maW5kKCdpbnB1dCcpLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgIHZhciBhZnRlckNoZWNrO1xuICAgICAgaWYgKHNlbGYucGFyYW1zLmJlaGF2aW91ci5hdXRvQ2hlY2spIHtcbiAgICAgICAgYWZ0ZXJDaGVjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgYW5zd2VyID0gJChcIjxkaXY+XCIpLnRleHQodGhpcy5nZXRVc2VyQW5zd2VyKCkpLmh0bWwoKTtcbiAgICAgICAgICBzZWxmLnJlYWQoKHRoaXMuY29ycmVjdCgpID8gc2VsZi5wYXJhbXMuYW5zd2VySXNDb3JyZWN0IDogc2VsZi5wYXJhbXMuYW5zd2VySXNXcm9uZykucmVwbGFjZSgnOmFucycsIGFuc3dlcikpO1xuICAgICAgICAgIGlmIChzZWxmLmRvbmUgfHwgc2VsZi5hbGxCbGFua3NGaWxsZWRPdXQoKSkge1xuICAgICAgICAgICAgLy8gQWxsIGFuc3dlcnMgaGFzIGJlZW4gZ2l2ZW4uIFNob3cgc29sdXRpb25zIGJ1dHRvbi5cbiAgICAgICAgICAgIHNlbGYudG9nZ2xlQnV0dG9uVmlzaWJpbGl0eShTVEFURV9DSEVDS0lORyk7XG4gICAgICAgICAgICBzZWxmLnNob3dFdmFsdWF0aW9uKCk7XG4gICAgICAgICAgICBzZWxmLnRyaWdnZXJBbnN3ZXJlZCgpO1xuICAgICAgICAgICAgc2VsZi5kb25lID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBzZWxmLmNsb3plc1tpXS5zZXRJbnB1dCgkKHRoaXMpLCBhZnRlckNoZWNrLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYudG9nZ2xlQnV0dG9uVmlzaWJpbGl0eShTVEFURV9PTkdPSU5HKTtcbiAgICAgICAgaWYgKCFzZWxmLnBhcmFtcy5iZWhhdmlvdXIuYXV0b0NoZWNrKSB7XG4gICAgICAgICAgc2VsZi5oaWRlRXZhbHVhdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9LCBpLCBzZWxmLmNsb3plcy5sZW5ndGgpO1xuICAgIH0pLmtleWRvd24oZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXG4gICAgICAvLyBBZGp1c3Qgd2lkdGggb2YgdGV4dCBpbnB1dCBmaWVsZCB0byBtYXRjaCB2YWx1ZVxuICAgICAgc2VsZi5hdXRvR3Jvd1RleHRGaWVsZCgkdGhpcyk7XG5cbiAgICAgIHZhciAkaW5wdXRzLCBpc0xhc3RJbnB1dDtcbiAgICAgIHZhciBlbnRlclByZXNzZWQgPSAoZXZlbnQua2V5Q29kZSA9PT0gMTMpO1xuICAgICAgdmFyIHRhYlByZXNzZWRBdXRvQ2hlY2sgPSAoZXZlbnQua2V5Q29kZSA9PT0gOSAmJiBzZWxmLnBhcmFtcy5iZWhhdmlvdXIuYXV0b0NoZWNrKTtcblxuICAgICAgaWYgKGVudGVyUHJlc3NlZCB8fCB0YWJQcmVzc2VkQXV0b0NoZWNrKSB7XG4gICAgICAgIC8vIEZpZ3VyZSBvdXQgd2hpY2ggaW5wdXRzIGFyZSBsZWZ0IHRvIGFuc3dlclxuICAgICAgICAkaW5wdXRzID0gc2VsZi4kcXVlc3Rpb25zLmZpbmQoJy5oNXAtaW5wdXQtd3JhcHBlcjpub3QoLmg1cC1jb3JyZWN0KSAuaDVwLXRleHQtaW5wdXQnKTtcblxuICAgICAgICAvLyBGaWd1cmUgb3V0IGlmIHRoaXMgaXMgdGhlIGxhc3QgaW5wdXRcbiAgICAgICAgaXNMYXN0SW5wdXQgPSAkdGhpcy5pcygkaW5wdXRzWyRpbnB1dHMubGVuZ3RoIC0gMV0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoKHRhYlByZXNzZWRBdXRvQ2hlY2sgJiYgaXNMYXN0SW5wdXQgJiYgIXNlbGYuc2hpZnRQcmVzc2VkKSB8fFxuICAgICAgICAgIChlbnRlclByZXNzZWQgJiYgaXNMYXN0SW5wdXQpKSB7XG4gICAgICAgIC8vIEZvY3VzIGZpcnN0IGJ1dHRvbiBvbiBuZXh0IHRpY2tcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi5mb2N1c0J1dHRvbigpO1xuICAgICAgICB9LCAxMCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbnRlclByZXNzZWQpIHtcbiAgICAgICAgaWYgKGlzTGFzdElucHV0KSB7XG4gICAgICAgICAgLy8gQ2hlY2sgYW5zd2Vyc1xuICAgICAgICAgICR0aGlzLnRyaWdnZXIoJ2JsdXInKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvLyBGaW5kIG5leHQgaW5wdXQgdG8gZm9jdXNcbiAgICAgICAgICAkaW5wdXRzLmVxKCRpbnB1dHMuaW5kZXgoJHRoaXMpICsgMSkuZm9jdXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gUHJldmVudCBmb3JtIHN1Ym1pc3Npb24gb24gZW50ZXIga2V5XG4gICAgICB9XG4gICAgfSkub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGYuYW5zd2VyZWQgPSB0cnVlO1xuICAgICAgc2VsZi50cmlnZ2VyWEFQSSgnaW50ZXJhY3RlZCcpO1xuICAgIH0pO1xuXG4gICAgc2VsZi5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgc2VsZi5yZXNldEdyb3dUZXh0RmllbGQoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLiRxdWVzdGlvbnM7XG4gIH07XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLmF1dG9Hcm93VGV4dEZpZWxkID0gZnVuY3Rpb24gKCRpbnB1dCkge1xuICAgIC8vIERvIG5vdCBzZXQgdGV4dCBmaWVsZCBzaXplIHdoZW4gc2VwYXJhdGUgbGluZXMgaXMgZW5hYmxlZFxuICAgIGlmICh0aGlzLnBhcmFtcy5iZWhhdmlvdXIuc2VwYXJhdGVMaW5lcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZm9udFNpemUgPSBwYXJzZUludCgkaW5wdXQuY3NzKCdmb250LXNpemUnKSwgMTApO1xuICAgIHZhciBtaW5FbSA9IDM7XG4gICAgdmFyIG1pblB4ID0gZm9udFNpemUgKiBtaW5FbTtcbiAgICB2YXIgcmlnaHRQYWRFbSA9IDMuMjU7XG4gICAgdmFyIHJpZ2h0UGFkUHggPSBmb250U2l6ZSAqIHJpZ2h0UGFkRW07XG4gICAgdmFyIHN0YXRpY19taW5fcGFkID0gMC41ICogZm9udFNpemU7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0bXAgPSAkKCc8ZGl2PicsIHtcbiAgICAgICAgJ3RleHQnOiAkaW5wdXQudmFsKClcbiAgICAgIH0pO1xuICAgICAgdG1wLmNzcyh7XG4gICAgICAgICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsXG4gICAgICAgICd3aGl0ZS1zcGFjZSc6ICdub3dyYXAnLFxuICAgICAgICAnZm9udC1zaXplJzogJGlucHV0LmNzcygnZm9udC1zaXplJyksXG4gICAgICAgICdmb250LWZhbWlseSc6ICRpbnB1dC5jc3MoJ2ZvbnQtZmFtaWx5JyksXG4gICAgICAgICdwYWRkaW5nJzogJGlucHV0LmNzcygncGFkZGluZycpLFxuICAgICAgICAnd2lkdGgnOiAnaW5pdGlhbCdcbiAgICAgIH0pO1xuICAgICAgJGlucHV0LnBhcmVudCgpLmFwcGVuZCh0bXApO1xuICAgICAgdmFyIHdpZHRoID0gdG1wLndpZHRoKCk7XG4gICAgICB2YXIgcGFyZW50V2lkdGggPSBzZWxmLiRxdWVzdGlvbnMud2lkdGgoKTtcbiAgICAgIHRtcC5yZW1vdmUoKTtcbiAgICAgIGlmICh3aWR0aCA8PSBtaW5QeCkge1xuICAgICAgICAvLyBBcHBseSBtaW4gd2lkdGhcbiAgICAgICAgJGlucHV0LndpZHRoKG1pblB4ICsgc3RhdGljX21pbl9wYWQpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAod2lkdGggKyByaWdodFBhZFB4ID49IHBhcmVudFdpZHRoKSB7XG4gICAgICAgIC8vIEFwcGx5IG1heCB3aWR0aCBvZiBwYXJlbnRcbiAgICAgICAgJGlucHV0LndpZHRoKHBhcmVudFdpZHRoIC0gcmlnaHRQYWRQeCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gQXBwbHkgd2lkdGggdGhhdCB3cmFwcyBpbnB1dFxuICAgICAgICAkaW5wdXQud2lkdGgod2lkdGggKyBzdGF0aWNfbWluX3BhZCk7XG4gICAgICB9XG4gICAgfSwgMSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc2l6ZSBhbGwgdGV4dCBmaWVsZCBncm93dGggdG8gY3VycmVudCBzaXplLlxuICAgKi9cbiAgQmxhbmtzLnByb3RvdHlwZS5yZXNldEdyb3dUZXh0RmllbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdGhpcy4kcXVlc3Rpb25zLmZpbmQoJ2lucHV0JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLmF1dG9Hcm93VGV4dEZpZWxkKCQodGhpcykpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUb2dnbGUgYnV0dG9ucyBkZXBlbmRlbnQgb2Ygc3RhdGUuXG4gICAqXG4gICAqIFVzaW5nIENTUy1ydWxlcyB0byBjb25kaXRpb25hbGx5IHNob3cvaGlkZSB1c2luZyB0aGUgZGF0YS1hdHRyaWJ1dGUgW2RhdGEtc3RhdGVdXG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLnRvZ2dsZUJ1dHRvblZpc2liaWxpdHkgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAvLyBUaGUgc2hvdyBzb2x1dGlvbnMgYnV0dG9uIGlzIGhpZGRlbiBpZiBhbGwgYW5zd2VycyBhcmUgY29ycmVjdFxuICAgIHZhciBhbGxDb3JyZWN0ID0gKHRoaXMuZ2V0U2NvcmUoKSA9PT0gdGhpcy5nZXRNYXhTY29yZSgpKTtcbiAgICBpZiAodGhpcy5wYXJhbXMuYmVoYXZpb3VyLmF1dG9DaGVjayAmJiBhbGxDb3JyZWN0KSB7XG4gICAgICAvLyBXZSBhcmUgdmlld2luZyB0aGUgc29sdXRpb25zXG4gICAgICBzdGF0ZSA9IFNUQVRFX0ZJTklTSEVEO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBhcmFtcy5iZWhhdmlvdXIuZW5hYmxlU29sdXRpb25zQnV0dG9uKSB7XG4gICAgICBpZiAoc3RhdGUgPT09IFNUQVRFX0NIRUNLSU5HICYmICFhbGxDb3JyZWN0KSB7XG4gICAgICAgIHRoaXMuc2hvd0J1dHRvbignc2hvdy1zb2x1dGlvbicpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuaGlkZUJ1dHRvbignc2hvdy1zb2x1dGlvbicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnBhcmFtcy5iZWhhdmlvdXIuZW5hYmxlUmV0cnkpIHtcbiAgICAgIGlmICgoc3RhdGUgPT09IFNUQVRFX0NIRUNLSU5HICYmICFhbGxDb3JyZWN0KSB8fCBzdGF0ZSA9PT0gU1RBVEVfU0hPV0lOR19TT0xVVElPTikge1xuICAgICAgICB0aGlzLnNob3dCdXR0b24oJ3RyeS1hZ2FpbicpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuaGlkZUJ1dHRvbigndHJ5LWFnYWluJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN0YXRlID09PSBTVEFURV9PTkdPSU5HKSB7XG4gICAgICB0aGlzLnNob3dCdXR0b24oJ2NoZWNrLWFuc3dlcicpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuaGlkZUJ1dHRvbignY2hlY2stYW5zd2VyJyk7XG4gICAgfVxuXG4gICAgdGhpcy50cmlnZ2VyKCdyZXNpemUnKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2sgaWYgc29sdXRpb24gaXMgYWxsb3dlZC4gV2FybiB1c2VyIGlmIG5vdFxuICAgKi9cbiAgQmxhbmtzLnByb3RvdHlwZS5hbGxvd1NvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnBhcmFtcy5iZWhhdmlvdXIuc2hvd1NvbHV0aW9uc1JlcXVpcmVzSW5wdXQgPT09IHRydWUpIHtcbiAgICAgIGlmICghdGhpcy5hbGxCbGFua3NGaWxsZWRPdXQoKSkge1xuICAgICAgICB0aGlzLnVwZGF0ZUZlZWRiYWNrQ29udGVudCh0aGlzLnBhcmFtcy5ub3RGaWxsZWRPdXQpO1xuICAgICAgICB0aGlzLnJlYWQodGhpcy5wYXJhbXMubm90RmlsbGVkT3V0KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYWxsIGJsYW5rcyBhcmUgZmlsbGVkIG91dFxuICAgKlxuICAgKiBAbWV0aG9kIGFsbEJsYW5rc0ZpbGxlZE91dFxuICAgKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgYWxsIGJsYW5rcyBhcmUgZmlsbGVkIG91dC5cbiAgICovXG4gIEJsYW5rcy5wcm90b3R5cGUuYWxsQmxhbmtzRmlsbGVkT3V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAhdGhpcy5jbG96ZXMuc29tZShmdW5jdGlvbiAoY2xvemUpIHtcbiAgICAgIHJldHVybiAhY2xvemUuZmlsbGVkT3V0KCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1hcmsgd2hpY2ggYW5zd2VycyBhcmUgY29ycmVjdCBhbmQgd2hpY2ggYXJlIHdyb25nIGFuZCBkaXNhYmxlIGZpZWxkcyBpZiByZXRyeSBpcyBvZmYuXG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLm1hcmtSZXN1bHRzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuY2xvemVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzZWxmLmNsb3plc1tpXS5jaGVja0Fuc3dlcigpO1xuICAgICAgaWYgKCFzZWxmLnBhcmFtcy5iZWhhdmlvdXIuZW5hYmxlUmV0cnkpIHtcbiAgICAgICAgc2VsZi5jbG96ZXNbaV0uZGlzYWJsZUlucHV0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMudHJpZ2dlcigncmVzaXplJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZWQgbWFya2VkIHJlc3VsdHNcbiAgICovXG4gIEJsYW5rcy5wcm90b3R5cGUucmVtb3ZlTWFya2VkUmVzdWx0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLiRxdWVzdGlvbnMuZmluZCgnLmg1cC1pbnB1dC13cmFwcGVyJykucmVtb3ZlQ2xhc3MoJ2g1cC1jb3JyZWN0IGg1cC13cm9uZycpO1xuICAgIHRoaXMuJHF1ZXN0aW9ucy5maW5kKCcuaDVwLWlucHV0LXdyYXBwZXIgPiBpbnB1dCcpLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgIHRoaXMudHJpZ2dlcigncmVzaXplJyk7XG4gIH07XG5cblxuICAvKipcbiAgICogRGlzcGxheXMgdGhlIGNvcnJlY3QgYW5zd2Vyc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFthbHdheXNTaG93U29sdXRpb25dXG4gICAqICBXaWxsIGFsd2F5cyBzaG93IHNvbHV0aW9uIGlmIHRydWVcbiAgICovXG4gIEJsYW5rcy5wcm90b3R5cGUuc2hvd0NvcnJlY3RBbnN3ZXJzID0gZnVuY3Rpb24gKGFsd2F5c1Nob3dTb2x1dGlvbikge1xuICAgIGlmICghYWx3YXlzU2hvd1NvbHV0aW9uICYmICF0aGlzLmFsbG93U29sdXRpb24oKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudG9nZ2xlQnV0dG9uVmlzaWJpbGl0eShTVEFURV9TSE9XSU5HX1NPTFVUSU9OKTtcbiAgICB0aGlzLmhpZGVTb2x1dGlvbnMoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jbG96ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuY2xvemVzW2ldLnNob3dTb2x1dGlvbigpO1xuICAgIH1cbiAgICB0aGlzLnRyaWdnZXIoJ3Jlc2l6ZScpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUb2dnbGUgaW5wdXQgYWxsb3dlZCBmb3IgYWxsIGlucHV0IGZpZWxkc1xuICAgKlxuICAgKiBAbWV0aG9kIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSAge2Jvb2xlYW59IGVuYWJsZWQgVHJ1ZSBpZiBmaWVsZHMgc2hvdWxkIGFsbG93IGlucHV0LCBvdGhlcndpc2UgZmFsc2VcbiAgICovXG4gIEJsYW5rcy5wcm90b3R5cGUudG9nZ2xlQWxsSW5wdXRzID0gZnVuY3Rpb24gKGVuYWJsZWQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2xvemVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmNsb3plc1tpXS50b2dnbGVJbnB1dChlbmFibGVkKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc3BsYXkgdGhlIGNvcnJlY3Qgc29sdXRpb24gZm9yIHRoZSBpbnB1dCBib3hlcy5cbiAgICpcbiAgICogVGhpcyBpcyBpbnZva2VkIGZyb20gQ1AgYW5kIFFTIC0gYmUgY2FyZWZ1bGwhXG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLnNob3dTb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5wYXJhbXMuYmVoYXZpb3VyLmVuYWJsZVNvbHV0aW9uc0J1dHRvbiA9IHRydWU7XG4gICAgdGhpcy50b2dnbGVCdXR0b25WaXNpYmlsaXR5KFNUQVRFX0ZJTklTSEVEKTtcbiAgICB0aGlzLm1hcmtSZXN1bHRzKCk7XG4gICAgdGhpcy5zaG93RXZhbHVhdGlvbigpO1xuICAgIHRoaXMuc2hvd0NvcnJlY3RBbnN3ZXJzKHRydWUpO1xuICAgIHRoaXMudG9nZ2xlQWxsSW5wdXRzKGZhbHNlKTtcbiAgICAvL0hpZGVzIGFsbCBidXR0b25zIGluIFwic2hvdyBzb2x1dGlvblwiIG1vZGUuXG4gICAgdGhpcy5oaWRlQnV0dG9ucygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXNldHMgdGhlIGNvbXBsZXRlIHRhc2suXG4gICAqIFVzZWQgaW4gY29udHJhY3RzLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLnJlc2V0VGFzayA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmFuc3dlcmVkID0gZmFsc2U7XG4gICAgdGhpcy5oaWRlRXZhbHVhdGlvbigpO1xuICAgIHRoaXMuaGlkZVNvbHV0aW9ucygpO1xuICAgIHRoaXMuY2xlYXJBbnN3ZXJzKCk7XG4gICAgdGhpcy5yZW1vdmVNYXJrZWRSZXN1bHRzKCk7XG4gICAgdGhpcy50b2dnbGVCdXR0b25WaXNpYmlsaXR5KFNUQVRFX09OR09JTkcpO1xuICAgIHRoaXMucmVzZXRHcm93VGV4dEZpZWxkKCk7XG4gICAgdGhpcy50b2dnbGVBbGxJbnB1dHModHJ1ZSk7XG4gICAgdGhpcy5kb25lID0gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEhpZGVzIGFsbCBidXR0b25zLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLmhpZGVCdXR0b25zID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uVmlzaWJpbGl0eShTVEFURV9GSU5JU0hFRCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgeEFQSSBhbnN3ZXJlZCBldmVudFxuICAgKi9cbiAgQmxhbmtzLnByb3RvdHlwZS50cmlnZ2VyQW5zd2VyZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hbnN3ZXJlZCA9IHRydWU7XG4gICAgdmFyIHhBUElFdmVudCA9IHRoaXMuY3JlYXRlWEFQSUV2ZW50VGVtcGxhdGUoJ2Fuc3dlcmVkJyk7XG4gICAgdGhpcy5hZGRRdWVzdGlvblRvWEFQSSh4QVBJRXZlbnQpO1xuICAgIHRoaXMuYWRkUmVzcG9uc2VUb1hBUEkoeEFQSUV2ZW50KTtcbiAgICB0aGlzLnRyaWdnZXIoeEFQSUV2ZW50KTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHhBUEkgZGF0YS5cbiAgICogQ29udHJhY3QgdXNlZCBieSByZXBvcnQgcmVuZGVyaW5nIGVuZ2luZS5cbiAgICpcbiAgICogQHNlZSBjb250cmFjdCBhdCB7QGxpbmsgaHR0cHM6Ly9oNXAub3JnL2RvY3VtZW50YXRpb24vZGV2ZWxvcGVycy9jb250cmFjdHMjZ3VpZGVzLWhlYWRlci02fVxuICAgKi9cbiAgQmxhbmtzLnByb3RvdHlwZS5nZXRYQVBJRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgeEFQSUV2ZW50ID0gdGhpcy5jcmVhdGVYQVBJRXZlbnRUZW1wbGF0ZSgnYW5zd2VyZWQnKTtcbiAgICB0aGlzLmFkZFF1ZXN0aW9uVG9YQVBJKHhBUElFdmVudCk7XG4gICAgdGhpcy5hZGRSZXNwb25zZVRvWEFQSSh4QVBJRXZlbnQpO1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0ZW1lbnQ6IHhBUElFdmVudC5kYXRhLnN0YXRlbWVudFxuICAgIH07XG4gIH07XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHhBUEkgb2JqZWN0IGRlZmluaXRpb24gdXNlZCBpbiB4QVBJIHN0YXRlbWVudHMuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIEJsYW5rcy5wcm90b3R5cGUuZ2V0eEFQSURlZmluaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGRlZmluaXRpb24gPSB7fTtcbiAgICBkZWZpbml0aW9uLmRlc2NyaXB0aW9uID0ge1xuICAgICAgJ2VuLVVTJzogdGhpcy5wYXJhbXMudGV4dFxuICAgIH07XG4gICAgZGVmaW5pdGlvbi50eXBlID0gJ2h0dHA6Ly9hZGxuZXQuZ292L2V4cGFwaS9hY3Rpdml0aWVzL2NtaS5pbnRlcmFjdGlvbic7XG4gICAgZGVmaW5pdGlvbi5pbnRlcmFjdGlvblR5cGUgPSAnZmlsbC1pbic7XG5cbiAgICBjb25zdCBjbG96ZVNvbHV0aW9ucyA9IFtdO1xuICAgIGxldCBjcnAgPSAnJztcbiAgICAvLyB4QVBJIGZvcmNlcyB1cyB0byBjcmVhdGUgc29sdXRpb24gcGF0dGVybnMgZm9yIGFsbCBwb3NzaWJsZSBzb2x1dGlvbiBjb21iaW5hdGlvbnNcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyYW1zLnF1ZXN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHF1ZXN0aW9uID0gdGhpcy5oYW5kbGVCbGFua3ModGhpcy5wYXJhbXMucXVlc3Rpb25zW2ldLCBmdW5jdGlvbiAoc29sdXRpb24pIHtcbiAgICAgICAgLy8gQ29sbGVjdCBhbGwgc29sdXRpb24gY29tYmluYXRpb25zIGZvciB0aGUgSDVQIEFsdGVybmF0aXZlIGV4dGVuc2lvblxuICAgICAgICBjbG96ZVNvbHV0aW9ucy5wdXNoKHNvbHV0aW9uLnNvbHV0aW9ucyk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgYmFzaWMgcmVzcG9uc2UgcGF0dGVybiBvdXQgb2YgdGhlIGZpcnN0IGFsdGVybmF0aXZlIGZvciBlYWNoIGJsYW5rcyBmaWVsZFxuICAgICAgICBjcnAgKz0gKCFjcnAgPyAnJyA6ICdbLF0nKSArIHNvbHV0aW9uLnNvbHV0aW9uc1swXTtcblxuICAgICAgICAvLyBXZSByZXBsYWNlIHRoZSBzb2x1dGlvbnMgaW4gdGhlIHF1ZXN0aW9uIHdpdGggYSBcImJsYW5rXCJcbiAgICAgICAgcmV0dXJuICdfX19fX19fX19fJztcbiAgICAgIH0pO1xuICAgICAgZGVmaW5pdGlvbi5kZXNjcmlwdGlvblsnZW4tVVMnXSArPSBxdWVzdGlvbjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGJhc2ljIHJlc3BvbnNlIHBhdHRlcm4gKG5vdCBzdXBwb3J0aW5nIG11bHRpcGxlIGFsdGVybmF0aXZlcyBmb3IgYmxhbmtzKVxuICAgIGRlZmluaXRpb24uY29ycmVjdFJlc3BvbnNlc1BhdHRlcm4gPSBbXG4gICAgICAne2Nhc2VfbWF0dGVycz0nICsgdGhpcy5wYXJhbXMuYmVoYXZpb3VyLmNhc2VTZW5zaXRpdmUgKyAnfScgKyBjcnAsXG4gICAgXTtcblxuICAgIC8vIEFkZCB0aGUgSDVQIEFsdGVybmF0aXZlIGV4dGVuc2lvbiB3aGljaCBwcm92aWRlcyBhbGwgdGhlIGNvbWJpbmF0aW9ucyBvZiBkaWZmZXJlbnQgYW5zd2Vyc1xuICAgIC8vIFJlcG9ydGluZyBzb2Z0d2FyZSB3aWxsIG5lZWQgdG8gc3VwcG9ydCB0aGlzIGV4dGVuc2lvbiBmb3IgYWx0ZXJuYXRpdmVzIHRvIHdvcmsuXG4gICAgZGVmaW5pdGlvbi5leHRlbnNpb25zID0gZGVmaW5pdGlvbi5leHRlbnNpb25zIHx8IHt9O1xuICAgIGRlZmluaXRpb24uZXh0ZW5zaW9uc1tYQVBJX0NBU0VfU0VOU0lUSVZJVFldID0gdGhpcy5wYXJhbXMuYmVoYXZpb3VyLmNhc2VTZW5zaXRpdmU7XG4gICAgZGVmaW5pdGlvbi5leHRlbnNpb25zW1hBUElfQUxURVJOQVRJVkVfRVhURU5TSU9OXSA9IGNsb3plU29sdXRpb25zO1xuXG4gICAgcmV0dXJuIGRlZmluaXRpb247XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCB0aGUgcXVlc3Rpb24gaXRzZWx0IHRvIHRoZSBkZWZpbml0aW9uIHBhcnQgb2YgYW4geEFQSUV2ZW50XG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLmFkZFF1ZXN0aW9uVG9YQVBJID0gZnVuY3Rpb24gKHhBUElFdmVudCkge1xuICAgIHZhciBkZWZpbml0aW9uID0geEFQSUV2ZW50LmdldFZlcmlmaWVkU3RhdGVtZW50VmFsdWUoWydvYmplY3QnLCAnZGVmaW5pdGlvbiddKTtcbiAgICAkLmV4dGVuZCh0cnVlLCBkZWZpbml0aW9uLCB0aGlzLmdldHhBUElEZWZpbml0aW9uKCkpO1xuXG4gICAgLy8gU2V0IHJlcG9ydGluZyBtb2R1bGUgdmVyc2lvbiBpZiBhbHRlcm5hdGl2ZSBleHRlbnNpb24gaXMgdXNlZFxuICAgIGlmICh0aGlzLmhhc0FsdGVybmF0aXZlcykge1xuICAgICAgY29uc3QgY29udGV4dCA9IHhBUElFdmVudC5nZXRWZXJpZmllZFN0YXRlbWVudFZhbHVlKFsnY29udGV4dCddKTtcbiAgICAgIGNvbnRleHQuZXh0ZW5zaW9ucyA9IGNvbnRleHQuZXh0ZW5zaW9ucyB8fCB7fTtcbiAgICAgIGNvbnRleHQuZXh0ZW5zaW9uc1tYQVBJX1JFUE9SVElOR19WRVJTSU9OX0VYVEVOU0lPTl0gPSAnMS4xLjAnO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUGFyc2UgdGhlIHNvbHV0aW9uIHRleHQgKHRleHQgYmV0d2VlbiB0aGUgYXN0ZXJpc2tzKVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc29sdXRpb25UZXh0XG4gICAqIEByZXR1cm5zIHtvYmplY3R9IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzXG4gICAqICAtIHRpcDogdGhlIHRpcCB0ZXh0IGZvciB0aGlzIHNvbHV0aW9uLCB1bmRlZmluZWQgaWYgbm8gdGlwXG4gICAqICAtIHNvbHV0aW9uczogYXJyYXkgb2Ygc29sdXRpb24gd29yZHNcbiAgICovXG4gIEJsYW5rcy5wcm90b3R5cGUucGFyc2VTb2x1dGlvbiA9IGZ1bmN0aW9uIChzb2x1dGlvblRleHQpIHtcbiAgICB2YXIgdGlwLCBzb2x1dGlvbjtcblxuICAgIHZhciB0aXBTdGFydCA9IHNvbHV0aW9uVGV4dC5pbmRleE9mKCc6Jyk7XG4gICAgaWYgKHRpcFN0YXJ0ICE9PSAtMSkge1xuICAgICAgLy8gRm91bmQgdGlwLCBub3cgZXh0cmFjdFxuICAgICAgdGlwID0gc29sdXRpb25UZXh0LnNsaWNlKHRpcFN0YXJ0ICsgMSk7XG4gICAgICBzb2x1dGlvbiA9IHNvbHV0aW9uVGV4dC5zbGljZSgwLCB0aXBTdGFydCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgc29sdXRpb24gPSBzb2x1dGlvblRleHQ7XG4gICAgfVxuXG4gICAgLy8gU3BsaXQgdXAgYWx0ZXJuYXRpdmVzXG4gICAgdmFyIHNvbHV0aW9ucyA9IHNvbHV0aW9uLnNwbGl0KCcvJyk7XG4gICAgdGhpcy5oYXNBbHRlcm5hdGl2ZXMgPSB0aGlzLmhhc0FsdGVybmF0aXZlcyB8fCBzb2x1dGlvbnMubGVuZ3RoID4gMTtcblxuICAgIC8vIFRyaW0gc29sdXRpb25zXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb2x1dGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNvbHV0aW9uc1tpXSA9IEg1UC50cmltKHNvbHV0aW9uc1tpXSk7XG5cbiAgICAgIC8vZGVjb2RlcyBodG1sIGVudGl0aWVzXG4gICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgICBlbGVtLmlubmVySFRNTCA9IHNvbHV0aW9uc1tpXTtcbiAgICAgIHNvbHV0aW9uc1tpXSA9IGVsZW0udmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpcDogdGlwLFxuICAgICAgc29sdXRpb25zOiBzb2x1dGlvbnNcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgdGhlIHJlc3BvbnNlIHBhcnQgdG8gYW4geEFQSSBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge0g1UC5YQVBJRXZlbnR9IHhBUElFdmVudFxuICAgKiAgVGhlIHhBUEkgZXZlbnQgd2Ugd2lsbCBhZGQgYSByZXNwb25zZSB0b1xuICAgKi9cbiAgQmxhbmtzLnByb3RvdHlwZS5hZGRSZXNwb25zZVRvWEFQSSA9IGZ1bmN0aW9uICh4QVBJRXZlbnQpIHtcbiAgICB4QVBJRXZlbnQuc2V0U2NvcmVkUmVzdWx0KHRoaXMuZ2V0U2NvcmUoKSwgdGhpcy5nZXRNYXhTY29yZSgpLCB0aGlzKTtcbiAgICB4QVBJRXZlbnQuZGF0YS5zdGF0ZW1lbnQucmVzdWx0LnJlc3BvbnNlID0gdGhpcy5nZXR4QVBJUmVzcG9uc2UoKTtcbiAgfTtcblxuICAvKipcbiAgICogR2VuZXJhdGUgeEFQSSB1c2VyIHJlc3BvbnNlLCB1c2VkIGluIHhBUEkgc3RhdGVtZW50cy5cbiAgICogQHJldHVybiB7c3RyaW5nfSBVc2VyIGFuc3dlcnMgc2VwYXJhdGVkIGJ5IHRoZSBcIlssXVwiIHBhdHRlcm5cbiAgICovXG4gIEJsYW5rcy5wcm90b3R5cGUuZ2V0eEFQSVJlc3BvbnNlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB1c2Vyc0Fuc3dlcnMgPSB0aGlzLmdldEN1cnJlbnRTdGF0ZSgpO1xuICAgIHJldHVybiB1c2Vyc0Fuc3dlcnMuam9pbignWyxdJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNob3cgZXZhbHVhdGlvbiB3aWRnZXQsIGkuZTogJ1lvdSBnb3QgeCBvZiB5IGJsYW5rcyBjb3JyZWN0J1xuICAgKi9cbiAgQmxhbmtzLnByb3RvdHlwZS5zaG93RXZhbHVhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbWF4U2NvcmUgPSB0aGlzLmdldE1heFNjb3JlKCk7XG4gICAgdmFyIHNjb3JlID0gdGhpcy5nZXRTY29yZSgpO1xuICAgIHZhciBzY29yZVRleHQgPSBINVAuUXVlc3Rpb24uZGV0ZXJtaW5lT3ZlcmFsbEZlZWRiYWNrKHRoaXMucGFyYW1zLm92ZXJhbGxGZWVkYmFjaywgc2NvcmUgLyBtYXhTY29yZSkucmVwbGFjZSgnQHNjb3JlJywgc2NvcmUpLnJlcGxhY2UoJ0B0b3RhbCcsIG1heFNjb3JlKTtcblxuICAgIHRoaXMuc2V0RmVlZGJhY2soc2NvcmVUZXh0LCBzY29yZSwgbWF4U2NvcmUsIHRoaXMucGFyYW1zLnNjb3JlQmFyTGFiZWwpO1xuXG4gICAgaWYgKHNjb3JlID09PSBtYXhTY29yZSkge1xuICAgICAgdGhpcy50b2dnbGVCdXR0b25WaXNpYmlsaXR5KFNUQVRFX0ZJTklTSEVEKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEhpZGUgdGhlIGV2YWx1YXRpb24gd2lkZ2V0XG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLmhpZGVFdmFsdWF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIENsZWFyIGV2YWx1YXRpb24gc2VjdGlvbi5cbiAgICB0aGlzLnJlbW92ZUZlZWRiYWNrKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEhpZGUgc29sdXRpb25zLiAoL3RyeSBhZ2FpbilcbiAgICovXG4gIEJsYW5rcy5wcm90b3R5cGUuaGlkZVNvbHV0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBDbGVhbiBzb2x1dGlvbiBmcm9tIHF1aXpcbiAgICB0aGlzLiRxdWVzdGlvbnMuZmluZCgnLmg1cC1jb3JyZWN0LWFuc3dlcicpLnJlbW92ZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgbWF4aW11bSBudW1iZXIgb2YgY29ycmVjdCBhbnN3ZXJzLlxuICAgKlxuICAgKiBAcmV0dXJucyB7TnVtYmVyfSBNYXggcG9pbnRzXG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLmdldE1heFNjb3JlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gc2VsZi5jbG96ZXMubGVuZ3RoO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb3VudCB0aGUgbnVtYmVyIG9mIGNvcnJlY3QgYW5zd2Vycy5cbiAgICpcbiAgICogQHJldHVybnMge051bWJlcn0gUG9pbnRzXG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLmdldFNjb3JlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgY29ycmVjdCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmNsb3plcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHNlbGYuY2xvemVzW2ldLmNvcnJlY3QoKSkge1xuICAgICAgICBjb3JyZWN0Kys7XG4gICAgICB9XG4gICAgICBzZWxmLnBhcmFtcy51c2VyQW5zd2Vyc1tpXSA9IHNlbGYuY2xvemVzW2ldLmdldFVzZXJBbnN3ZXIoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29ycmVjdDtcbiAgfTtcblxuICBCbGFua3MucHJvdG90eXBlLmdldFRpdGxlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBINVAuY3JlYXRlVGl0bGUoKHRoaXMuY29udGVudERhdGEubWV0YWRhdGEgJiYgdGhpcy5jb250ZW50RGF0YS5tZXRhZGF0YS50aXRsZSkgPyB0aGlzLmNvbnRlbnREYXRhLm1ldGFkYXRhLnRpdGxlIDogJ0ZpbGwgSW4nKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYXIgdGhlIHVzZXIncyBhbnN3ZXJzXG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLmNsZWFyQW5zd2VycyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNsb3plcy5mb3JFYWNoKGZ1bmN0aW9uIChjbG96ZSkge1xuICAgICAgY2xvemUuc2V0VXNlcklucHV0KCcnKTtcbiAgICAgIGNsb3plLnJlc2V0QXJpYUxhYmVsKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBhbGwgaGFzIGJlZW4gYW5zd2VyZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgKi9cbiAgQmxhbmtzLnByb3RvdHlwZS5nZXRBbnN3ZXJHaXZlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5hbnN3ZXJlZCB8fCAhdGhpcy5oYXNDbG96ZXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEhlbHBzIHNldCBmb2N1cyB0aGUgZ2l2ZW4gaW5wdXQgZmllbGQuXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSAkaW5wdXRcbiAgICovXG4gIEJsYW5rcy5zZXRGb2N1cyA9IGZ1bmN0aW9uICgkaW5wdXQpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICRpbnB1dC5mb2N1cygpO1xuICAgIH0sIDEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIGNvbnRlbnQgb2YgZWFjaCBjbG96ZVxuICAgKlxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSBvYmplY3QgY29udGFpbmluZyBjb250ZW50IGZvciBlYWNoIGNsb3plXG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLmdldEN1cnJlbnRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2xvemVzQ29udGVudCA9IFtdO1xuXG4gICAgLy8gR2V0IHVzZXIgaW5wdXQgZm9yIGV2ZXJ5IGNsb3plXG4gICAgdGhpcy5jbG96ZXMuZm9yRWFjaChmdW5jdGlvbiAoY2xvemUpIHtcbiAgICAgIGNsb3plc0NvbnRlbnQucHVzaChjbG96ZS5nZXRVc2VyQW5zd2VyKCkpO1xuICAgIH0pO1xuICAgIHJldHVybiBjbG96ZXNDb250ZW50O1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIGFuc3dlcnMgdG8gY3VycmVudCB1c2VyIHN0YXRlXG4gICAqL1xuICBCbGFua3MucHJvdG90eXBlLnNldEg1UFVzZXJTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGlzVmFsaWRTdGF0ZSA9ICh0aGlzLnByZXZpb3VzU3RhdGUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1N0YXRlLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1N0YXRlLmxlbmd0aCA9PT0gdGhpcy5jbG96ZXMubGVuZ3RoKTtcblxuICAgIC8vIENoZWNrIHRoYXQgc3RvcmVkIHVzZXIgc3RhdGUgaXMgdmFsaWRcbiAgICBpZiAoIWlzVmFsaWRTdGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNldCBpbnB1dCBmcm9tIHVzZXIgc3RhdGVcbiAgICB2YXIgaGFzQWxsQ2xvemVzRmlsbGVkID0gdHJ1ZTtcbiAgICB0aGlzLnByZXZpb3VzU3RhdGUuZm9yRWFjaChmdW5jdGlvbiAoY2xvemVDb250ZW50LCBjY0luZGV4KSB7XG5cbiAgICAgIC8vIFJlZ2lzdGVyIHRoYXQgYW4gYW5zd2VyIGhhcyBiZWVuIGdpdmVuXG4gICAgICBpZiAoY2xvemVDb250ZW50Lmxlbmd0aCkge1xuICAgICAgICBzZWxmLmFuc3dlcmVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNsb3plID0gc2VsZi5jbG96ZXNbY2NJbmRleF07XG4gICAgICBjbG96ZS5zZXRVc2VySW5wdXQoY2xvemVDb250ZW50KTtcblxuICAgICAgLy8gSGFuZGxlIGluc3RhbnQgZmVlZGJhY2tcbiAgICAgIGlmIChzZWxmLnBhcmFtcy5iZWhhdmlvdXIuYXV0b0NoZWNrKSB7XG4gICAgICAgIGlmIChjbG96ZS5maWxsZWRPdXQoKSkge1xuICAgICAgICAgIGNsb3plLmNoZWNrQW5zd2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgaGFzQWxsQ2xvemVzRmlsbGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChzZWxmLnBhcmFtcy5iZWhhdmlvdXIuYXV0b0NoZWNrICYmIGhhc0FsbENsb3plc0ZpbGxlZCkge1xuICAgICAgc2VsZi5zaG93RXZhbHVhdGlvbigpO1xuICAgICAgc2VsZi50b2dnbGVCdXR0b25WaXNpYmlsaXR5KFNUQVRFX0NIRUNLSU5HKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc2FibGVzIGFueSBhY3RpdmUgaW5wdXQuIFVzZWZ1bCBmb3IgZnJlZXppbmcgdGhlIHRhc2sgYW5kIGRpcy1hbGxvd2luZ1xuICAgKiBtb2RpZmljYXRpb24gb2Ygd3JvbmcgYW5zd2Vycy5cbiAgICovXG4gIEJsYW5rcy5wcm90b3R5cGUuZGlzYWJsZUlucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuJHF1ZXN0aW9ucy5maW5kKCdpbnB1dCcpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gIH07XG5cbiAgQmxhbmtzLmlkQ291bnRlciA9IDA7XG5cbiAgcmV0dXJuIEJsYW5rcztcbn0pKEg1UC5qUXVlcnksIEg1UC5RdWVzdGlvbik7XG5cbi8qKlxuICogU3RhdGljIHV0aWxpdHkgbWV0aG9kIGZvciBwYXJzaW5nIEg1UC5CbGFua3MgcWVzdGlvbiBpbnRvIGEgZm9ybWF0IHVzZWZ1bFxuICogZm9yIGNyZWF0aW5nIHJlcG9ydHMuXG4gKlxuICogRXhhbXBsZSBxdWVzdGlvbjogJ0g1UCBjb250ZW50IG1heSBiZSBlZGl0ZWQgdXNpbmcgYSAqYnJvd3Nlci93ZWItYnJvd3Nlcjpzb21ldGhpbmcgeW91IHVzZSBldmVyeSBkYXkqLidcbiAqXG4gKiBQcm9kdWNlcyB0aGUgZm9sbG93aW5nIHJlc3VsdDpcbiAqIFtcbiAqICAge1xuICogICAgIHR5cGU6ICd0ZXh0JyxcbiAqICAgICBjb250ZW50OiAnSDVQIGNvbnRlbnQgbWF5IGJlIGVkaXRlZCB1c2luZyBhICdcbiAqICAgfSxcbiAqICAge1xuICogICAgIHR5cGU6ICdhbnN3ZXInLFxuICogICAgIGNvcnJlY3Q6IFsnYnJvd3NlcicsICd3ZWItYnJvd3NlciddXG4gKiAgIH0sXG4gKiAgIHtcbiAqICAgICB0eXBlOiAndGV4dCcsXG4gKiAgICAgY29udGVudDogJy4nXG4gKiAgIH1cbiAqIF1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlc3Rpb25cbiAqL1xuSDVQLkJsYW5rcy5wYXJzZVRleHQgPSBmdW5jdGlvbiAocXVlc3Rpb24pIHtcbiAgdmFyIGJsYW5rID0gbmV3IEg1UC5CbGFua3MoeyBxdWVzdGlvbjogcXVlc3Rpb24gfSk7XG5cbiAgLyoqXG4gICAqIFBhcnNlcyBhIHRleHQgaW50byBhbiBhcnJheSB3aGVyZSB3b3JkcyBzdGFydGluZyBhbmQgZW5kaW5nXG4gICAqIHdpdGggYW4gYXN0ZXJpc2sgYXJlIHNlcGFyYXRlZCBmcm9tIG90aGVyIHRleHQuXG4gICAqIGUuZyBbXCJ0aGlzXCIsIFwiKmlzKlwiLCBcIiBhbiBcIiwgXCIqZXhhbXBsZSpcIl1cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nW119XG4gICAqL1xuICBmdW5jdGlvbiB0b2tlbml6ZVF1ZXN0aW9uVGV4dCh0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQuc3BsaXQoLyhcXCouKj9cXCopLykuZmlsdGVyKGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgIHJldHVybiBzdHIubGVuZ3RoID4gMDsgfVxuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydHNBbmRFbmRzV2l0aEFuQXN0ZXJpc2soc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5zdWJzdHIoMCwxKSA9PT0gJyonICYmIHN0ci5zdWJzdHIoLTEpID09PSAnKic7XG4gIH1cblxuICBmdW5jdGlvbiByZXBsYWNlSHRtbFRhZ3Moc3RyLCB2YWx1ZSkge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvPFtePl0qPi9nLCB2YWx1ZSk7XG4gIH1cblxuICByZXR1cm4gdG9rZW5pemVRdWVzdGlvblRleHQocmVwbGFjZUh0bWxUYWdzKHF1ZXN0aW9uLCAnJykpLm1hcChmdW5jdGlvbiAocGFydCkge1xuICAgIHJldHVybiBzdGFydHNBbmRFbmRzV2l0aEFuQXN0ZXJpc2socGFydCkgP1xuICAgICAgKHtcbiAgICAgICAgdHlwZTogJ2Fuc3dlcicsXG4gICAgICAgIGNvcnJlY3Q6IGJsYW5rLnBhcnNlU29sdXRpb24ocGFydC5zbGljZSgxLCAtMSkpLnNvbHV0aW9uc1xuICAgICAgfSkgOlxuICAgICAgKHtcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICBjb250ZW50OiBwYXJ0XG4gICAgICB9KTtcbiAgfSk7XG59O1xuIl0sIm5hbWVzIjpbIkg1UCIsIkJsYW5rcyIsIiQiLCJRdWVzdGlvbiIsIlNUQVRFX09OR09JTkciLCJTVEFURV9DSEVDS0lORyIsIlNUQVRFX1NIT1dJTkdfU09MVVRJT04iLCJTVEFURV9GSU5JU0hFRCIsInBhcmFtcyIsImlkIiwiY29udGVudERhdGEiLCJzZWxmIiwidGhpcyIsImNhbGwiLCJjb250ZW50SWQiLCJleHRlbmQiLCJ0ZXh0IiwicXVlc3Rpb25zIiwib3ZlcmFsbEZlZWRiYWNrIiwidXNlckFuc3dlcnMiLCJzaG93U29sdXRpb25zIiwidHJ5QWdhaW4iLCJjaGVja0Fuc3dlciIsImNoYW5nZUFuc3dlciIsIm5vdEZpbGxlZE91dCIsImFuc3dlcklzQ29ycmVjdCIsImFuc3dlcklzV3JvbmciLCJhbnN3ZXJlZENvcnJlY3RseSIsImFuc3dlcmVkSW5jb3JyZWN0bHkiLCJzb2x1dGlvbkxhYmVsIiwiaW5wdXRMYWJlbCIsImlucHV0SGFzVGlwTGFiZWwiLCJ0aXBMYWJlbCIsInNjb3JlQmFyTGFiZWwiLCJiZWhhdmlvdXIiLCJlbmFibGVSZXRyeSIsImVuYWJsZVNvbHV0aW9uc0J1dHRvbiIsImVuYWJsZUNoZWNrQnV0dG9uIiwiY2FzZVNlbnNpdGl2ZSIsInNob3dTb2x1dGlvbnNSZXF1aXJlc0lucHV0IiwiYXV0b0NoZWNrIiwic2VwYXJhdGVMaW5lcyIsImExMXlDaGVjayIsImExMXlTaG93U29sdXRpb24iLCJhMTF5UmV0cnkiLCJhMTF5SGVhZGVyIiwic3VibWl0QW5zd2VyIiwiaSIsImxlbmd0aCIsInNwbGljZSIsInVuZGVmaW5lZCIsInByZXZpb3VzU3RhdGUiLCJjbG96ZXMiLCJzaGlmdFByZXNzZWQiLCIkYm9keSIsImtleWRvd24iLCJldmVudCIsImtleUNvZGUiLCJrZXl1cCIsImxhYmVsSWQiLCJpZENvdW50ZXIiLCJjb250ZW50IiwiY3JlYXRlUXVlc3Rpb25zIiwibWVkaWEiLCJ0eXBlIiwibGlicmFyeSIsInNwbGl0IiwiZmlsZSIsInNldEltYWdlIiwicGF0aCIsImRpc2FibGVJbWFnZVpvb21pbmciLCJhbHQiLCJ0aXRsZSIsInNvdXJjZXMiLCJzZXRWaWRlbyIsImZpbGVzIiwic2V0QXVkaW8iLCJzZXRJbnRyb2R1Y3Rpb24iLCJzZXRDb250ZW50IiwicmVnaXN0ZXJCdXR0b25zIiwic2V0SDVQVXNlclN0YXRlIiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCIkY29udGFpbmVyIiwiJGNvbnRlbnQiLCIkY29udGFpbmVyUGFyZW50cyIsInBhcmVudHMiLCJsYXN0IiwiZG9jdW1lbnQiLCJib2R5IiwiYWRkQnV0dG9uIiwiaW5uZXJIVE1MIiwiZm9jdXMiLCJ0b2dnbGVCdXR0b25WaXNpYmlsaXR5IiwibWFya1Jlc3VsdHMiLCJzaG93RXZhbHVhdGlvbiIsInRyaWdnZXJBbnN3ZXJlZCIsImNvbmZpcm1hdGlvbkRpYWxvZyIsImVuYWJsZSIsImNvbmZpcm1DaGVja0RpYWxvZyIsImwxMG4iLCJjb25maXJtQ2hlY2siLCJpbnN0YW5jZSIsIiRwYXJlbnRFbGVtZW50IiwidGV4dElmU3VibWl0dGluZyIsInNob3dDb3JyZWN0QW5zd2VycyIsInJlc2V0VGFzayIsIiRxdWVzdGlvbnMiLCJmaWx0ZXIiLCJmaW5kIiwiY29uZmlybVJldHJ5RGlhbG9nIiwiY29uZmlybVJldHJ5IiwiaGFuZGxlQmxhbmtzIiwicXVlc3Rpb24iLCJoYW5kbGVyIiwiY2xvemVFbmQiLCJjbG96ZVN0YXJ0IiwiaW5kZXhPZiIsImNsb3plQ29udGVudCIsInN1YnN0cmluZyIsInJlcGxhY2VyIiwicGFyc2VTb2x1dGlvbiIsInNsaWNlIiwiaHRtbCIsImNsb3plTnVtYmVyIiwic29sdXRpb24iLCJkZWZhdWx0VXNlckFuc3dlciIsImNsb3plIiwiQ2xvemUiLCJwdXNoIiwiaGFzQ2xvemVzIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInRhYkluZGV4IiwiaW5zZXJ0QmVmb3JlIiwiY2hpbGROb2RlcyIsImVhY2giLCJhZnRlckNoZWNrIiwiYW5zd2VyIiwiZ2V0VXNlckFuc3dlciIsInJlYWQiLCJjb3JyZWN0IiwicmVwbGFjZSIsImRvbmUiLCJhbGxCbGFua3NGaWxsZWRPdXQiLCJzZXRJbnB1dCIsImhpZGVFdmFsdWF0aW9uIiwiJGlucHV0cyIsImlzTGFzdElucHV0IiwiJHRoaXMiLCJhdXRvR3Jvd1RleHRGaWVsZCIsImVudGVyUHJlc3NlZCIsInRhYlByZXNzZWRBdXRvQ2hlY2siLCJpcyIsInNldFRpbWVvdXQiLCJmb2N1c0J1dHRvbiIsInRyaWdnZXIiLCJlcSIsImluZGV4Iiwib24iLCJhbnN3ZXJlZCIsInRyaWdnZXJYQVBJIiwicmVzZXRHcm93VGV4dEZpZWxkIiwiJGlucHV0IiwiZm9udFNpemUiLCJwYXJzZUludCIsImNzcyIsIm1pblB4IiwicmlnaHRQYWRQeCIsInN0YXRpY19taW5fcGFkIiwidG1wIiwidmFsIiwicGFyZW50IiwiYXBwZW5kIiwid2lkdGgiLCJwYXJlbnRXaWR0aCIsInJlbW92ZSIsInN0YXRlIiwiYWxsQ29ycmVjdCIsImdldFNjb3JlIiwiZ2V0TWF4U2NvcmUiLCJoaWRlQnV0dG9uIiwic2hvd0J1dHRvbiIsImFsbG93U29sdXRpb24iLCJ1cGRhdGVGZWVkYmFja0NvbnRlbnQiLCJzb21lIiwiZmlsbGVkT3V0IiwiZGlzYWJsZUlucHV0IiwicmVtb3ZlTWFya2VkUmVzdWx0cyIsInJlbW92ZUNsYXNzIiwiYXR0ciIsImFsd2F5c1Nob3dTb2x1dGlvbiIsImhpZGVTb2x1dGlvbnMiLCJzaG93U29sdXRpb24iLCJ0b2dnbGVBbGxJbnB1dHMiLCJlbmFibGVkIiwidG9nZ2xlSW5wdXQiLCJoaWRlQnV0dG9ucyIsImNsZWFyQW5zd2VycyIsInhBUElFdmVudCIsImNyZWF0ZVhBUElFdmVudFRlbXBsYXRlIiwiYWRkUXVlc3Rpb25Ub1hBUEkiLCJhZGRSZXNwb25zZVRvWEFQSSIsImdldFhBUElEYXRhIiwic3RhdGVtZW50IiwiZGF0YSIsImdldHhBUElEZWZpbml0aW9uIiwiZGVmaW5pdGlvbiIsImRlc2NyaXB0aW9uIiwiaW50ZXJhY3Rpb25UeXBlIiwiY2xvemVTb2x1dGlvbnMiLCJjcnAiLCJzb2x1dGlvbnMiLCJjb3JyZWN0UmVzcG9uc2VzUGF0dGVybiIsImV4dGVuc2lvbnMiLCJnZXRWZXJpZmllZFN0YXRlbWVudFZhbHVlIiwiaGFzQWx0ZXJuYXRpdmVzIiwiY29udGV4dCIsInNvbHV0aW9uVGV4dCIsInRpcCIsInRpcFN0YXJ0IiwidHJpbSIsImVsZW0iLCJ2YWx1ZSIsInNldFNjb3JlZFJlc3VsdCIsInJlc3VsdCIsInJlc3BvbnNlIiwiZ2V0eEFQSVJlc3BvbnNlIiwiZ2V0Q3VycmVudFN0YXRlIiwiam9pbiIsIm1heFNjb3JlIiwic2NvcmUiLCJzY29yZVRleHQiLCJkZXRlcm1pbmVPdmVyYWxsRmVlZGJhY2siLCJzZXRGZWVkYmFjayIsInJlbW92ZUZlZWRiYWNrIiwiZ2V0VGl0bGUiLCJjcmVhdGVUaXRsZSIsIm1ldGFkYXRhIiwiZm9yRWFjaCIsInNldFVzZXJJbnB1dCIsInJlc2V0QXJpYUxhYmVsIiwiZ2V0QW5zd2VyR2l2ZW4iLCJzZXRGb2N1cyIsImNsb3plc0NvbnRlbnQiLCJoYXNBbGxDbG96ZXNGaWxsZWQiLCJjY0luZGV4IiwialF1ZXJ5IiwicGFyc2VUZXh0Iiwic3RyIiwiYmxhbmsiLCJtYXAiLCJwYXJ0Iiwic3Vic3RyIiwic3RhcnRzQW5kRW5kc1dpdGhBbkFzdGVyaXNrIl0sInNvdXJjZVJvb3QiOiIifQ==